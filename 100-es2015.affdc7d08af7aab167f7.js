(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{"8jRI":function(n,l,t){"use strict";var e=new RegExp("%[a-f0-9]{2}","gi"),u=new RegExp("(%[a-f0-9]{2})+","gi");function r(n,l){try{return decodeURIComponent(n.join(""))}catch(u){}if(1===n.length)return n;var t=n.slice(0,l=l||1),e=n.slice(l);return Array.prototype.concat.call([],r(t),r(e))}function i(n){try{return decodeURIComponent(n)}catch(u){for(var l=n.match(e),t=1;t<l.length;t++)l=(n=r(l,t).join("")).match(e);return n}}n.exports=function(n){if("string"!=typeof n)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch(l){return function(n){for(var t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},e=u.exec(n);e;){try{t[e[0]]=decodeURIComponent(e[0])}catch(l){var r=i(e[0]);r!==e[0]&&(t[e[0]]=r)}e=u.exec(n)}t["%C2"]="\ufffd";for(var o=Object.keys(t),s=0;s<o.length;s++){var a=o[s];n=n.replace(new RegExp(a,"g"),t[a])}return n}(n)}}},"8yz6":function(n,l,t){"use strict";n.exports=(n,l)=>{if("string"!=typeof n||"string"!=typeof l)throw new TypeError("Expected the arguments to be of type `string`");if(""===l)return[n];const t=n.indexOf(l);return-1===t?[n]:[n.slice(0,t),n.slice(t+l.length)]}},E4T0:function(n,l,t){"use strict";t.r(l);var e=t("8Y7J");class u{}var r=t("pMnS"),i=t("MKJQ"),o=t("sZkV"),s=t("TSSN"),a=t("s7LF"),c=t("UU5k"),p=t("K2ro");class b{constructor(n,l,t,e,u,r,i){this.title=n,this.translator=l,this.api=t,this.alert=e,this.auth=u,this.router=r,this.activatedRoute=i,this.isPhoneVerified=!1,this.phone="",this.verificationCode="",this.username="",this.password="",this.passwordConfirmation=""}ngOnInit(){this.translator.get("title.signup").subscribe(n=>{this.title.setTitle(n)})}isInputValid(){if(!this.phone||this.phone.length<7||this.phone.length>15)return!1;if(!this.verificationCode)return!1;if(this.username&&(this.username.length<5||this.username.length>255))return!1;if(this.password){if(this.password.length<6||this.password.length>255)return!1;if(this.password!==this.passwordConfirmation)return!1}return!0}handleSendOTP(){this.api.v2().post("users/send-otp",{phone:this.phone}).then(n=>{n.subscribe(n=>{this.showAlert("Notice",n.success?"Verification code sent":"Verification code not sent","OK")})})}handleSignUp(){this.api.v2().post("users/signup",{phone:this.phone,verificationCode:this.verificationCode,username:this.username,password:this.password}).then(n=>{n.subscribe(n=>{if(console.log(n),n.success){const n="Notice",l="Registered successfully",t="OK";this.translator.get([n,l,t]).subscribe(e=>{this.alert.create({header:e[n],message:e[l],buttons:[{text:e[t],handler:()=>{this.router.navigate(["/login"])}}]}).then(n=>n.present())})}else this.showAlert("Notice",n.message&&"verification_failed"===n.message?"Verification failed":n.message&&"username_duplicated"===n.message?"Username is already in use":"Registration failed","OK")})})}showAlert(n,l,t){this.translator.get([n,l,t]).subscribe(e=>{this.alert.create({header:e[n],message:e[l],buttons:[e[t]]}).then(n=>n.present())})}}var h=t("cUpR"),d=t("iInd"),f=e.ob({encapsulation:0,styles:[[""]],data:{}});function g(n){return e.Jb(0,[(n()(),e.qb(0,0,null,null,11,"ion-header",[],null,null,null,i.Q,i.k)),e.pb(1,49152,null,0,o.A,[e.h,e.k,e.x],null,null),(n()(),e.qb(2,0,null,0,9,"ion-toolbar",[],null,null,null,i.lb,i.F)),e.pb(3,49152,null,0,o.yb,[e.h,e.k,e.x],null,null),(n()(),e.qb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,i.K,i.e)),e.pb(5,49152,null,0,o.k,[e.h,e.k,e.x],null,null),(n()(),e.qb(6,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==e.Bb(n,8).onClick(t)&&u),u}),i.H,i.b)),e.pb(7,49152,null,0,o.f,[e.h,e.k,e.x],null,null),e.pb(8,16384,null,0,o.g,[[2,o.eb],o.Eb],null,null),(n()(),e.qb(9,0,null,0,2,"ion-title",[["class","ion-text-center"],["translate","Sign Up"]],null,null,null,i.kb,i.E)),e.pb(10,49152,null,0,o.wb,[e.h,e.k,e.x],null,null),e.pb(11,8536064,null,0,s.f,[s.m,e.k,e.h],{translate:[0,"translate"]},null),(n()(),e.qb(12,0,null,null,92,"ion-content",[],null,null,null,i.O,i.i)),e.pb(13,49152,null,0,o.t,[e.h,e.k,e.x],null,null),(n()(),e.qb(14,0,null,0,4,"ion-row",[["class","ion-padding-vertical"]],null,null,null,i.Z,i.t)),e.pb(15,49152,null,0,o.fb,[e.h,e.k,e.x],null,null),(n()(),e.qb(16,0,null,0,2,"ion-col",[["class","ion-text-center"]],null,null,null,i.N,i.h)),e.pb(17,49152,null,0,o.s,[e.h,e.k,e.x],null,null),(n()(),e.qb(18,0,null,0,0,"img",[["alt","Register"],["src","assets/img/register-user.png"]],null,null,null,null,null)),(n()(),e.qb(19,0,null,0,85,"form",[["class","ion-padding-horizontal"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(n,l,t){var u=!0;return"submit"===l&&(u=!1!==e.Bb(n,21).onSubmit(t)&&u),"reset"===l&&(u=!1!==e.Bb(n,21).onReset()&&u),u}),null,null)),e.pb(20,16384,null,0,a.h,[],null,null),e.pb(21,4210688,null,0,a.e,[[8,null],[8,null]],null,null),e.Eb(2048,null,a.a,null,[a.e]),e.pb(23,16384,null,0,a.d,[[4,a.a]],null,null),(n()(),e.qb(24,0,null,null,80,"ion-list",[["lines","full"]],null,null,null,i.W,i.q)),e.pb(25,49152,null,0,o.N,[e.h,e.k,e.x],{lines:[0,"lines"]},null),(n()(),e.qb(26,0,null,0,14,"ion-item",[],null,null,null,i.U,i.o)),e.pb(27,49152,null,0,o.G,[e.h,e.k,e.x],null,null),(n()(),e.qb(28,0,null,0,12,"ion-grid",[["class","ion-no-padding ion-no-margin w-100"]],null,null,null,i.P,i.j)),e.pb(29,49152,null,0,o.z,[e.h,e.k,e.x],null,null),(n()(),e.qb(30,0,null,0,10,"ion-row",[],null,null,null,i.Z,i.t)),e.pb(31,49152,null,0,o.fb,[e.h,e.k,e.x],null,null),(n()(),e.qb(32,0,null,0,8,"ion-col",[["size","12"]],null,null,null,i.N,i.h)),e.pb(33,49152,null,0,o.s,[e.h,e.k,e.x],{size:[0,"size"]},null),(n()(),e.qb(34,0,null,0,2,"ion-label",[["translate","Phone Number"]],null,null,null,i.V,i.p)),e.pb(35,49152,null,0,o.M,[e.h,e.k,e.x],null,null),e.pb(36,8536064,null,0,s.f,[s.m,e.k,e.h],{translate:[0,"translate"]},null),(n()(),e.qb(37,0,null,0,3,"ion-input",[["autocomplete","off"],["required",""],["type","text"]],null,[[null,"change"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,t){var u=!0,r=n.component;return"ionBlur"===l&&(u=!1!==e.Bb(n,40)._handleBlurEvent(t.target)&&u),"ionChange"===l&&(u=!1!==e.Bb(n,40)._handleInputEvent(t.target)&&u),"change"===l&&(u=!1!==(r.phone=t.target.value)&&u),u}),i.T,i.n)),e.Eb(5120,null,a.c,(function(n){return[n]}),[o.Jb]),e.pb(39,49152,null,0,o.F,[e.h,e.k,e.x],{autocomplete:[0,"autocomplete"],required:[1,"required"],type:[2,"type"],value:[3,"value"]},null),e.pb(40,16384,null,0,o.Jb,[e.k],null,null),(n()(),e.qb(41,0,null,0,19,"ion-item",[["class","ion-margin-top"]],null,null,null,i.U,i.o)),e.pb(42,49152,null,0,o.G,[e.h,e.k,e.x],null,null),(n()(),e.qb(43,0,null,0,17,"ion-grid",[["class","ion-no-padding ion-no-margin w-100"]],null,null,null,i.P,i.j)),e.pb(44,49152,null,0,o.z,[e.h,e.k,e.x],null,null),(n()(),e.qb(45,0,null,0,15,"ion-row",[],null,null,null,i.Z,i.t)),e.pb(46,49152,null,0,o.fb,[e.h,e.k,e.x],null,null),(n()(),e.qb(47,0,null,0,8,"ion-col",[["size","6"]],null,null,null,i.N,i.h)),e.pb(48,49152,null,0,o.s,[e.h,e.k,e.x],{size:[0,"size"]},null),(n()(),e.qb(49,0,null,0,2,"ion-label",[["translate","Verification Code"]],null,null,null,i.V,i.p)),e.pb(50,49152,null,0,o.M,[e.h,e.k,e.x],null,null),e.pb(51,8536064,null,0,s.f,[s.m,e.k,e.h],{translate:[0,"translate"]},null),(n()(),e.qb(52,0,null,0,3,"ion-input",[["autocomplete","off"],["required",""],["type","text"]],null,[[null,"change"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,t){var u=!0,r=n.component;return"ionBlur"===l&&(u=!1!==e.Bb(n,55)._handleBlurEvent(t.target)&&u),"ionChange"===l&&(u=!1!==e.Bb(n,55)._handleInputEvent(t.target)&&u),"change"===l&&(u=!1!==(r.verificationCode=t.target.value)&&u),u}),i.T,i.n)),e.Eb(5120,null,a.c,(function(n){return[n]}),[o.Jb]),e.pb(54,49152,null,0,o.F,[e.h,e.k,e.x],{autocomplete:[0,"autocomplete"],required:[1,"required"],type:[2,"type"],value:[3,"value"]},null),e.pb(55,16384,null,0,o.Jb,[e.k],null,null),(n()(),e.qb(56,0,null,0,4,"ion-col",[["size","6"]],null,null,null,i.N,i.h)),e.pb(57,49152,null,0,o.s,[e.h,e.k,e.x],{size:[0,"size"]},null),(n()(),e.qb(58,0,null,0,2,"ion-button",[["class","ion-margin-top"],["color","tertiary"],["expand","block"],["translate","Send Verification Code"],["type","button"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.handleSendOTP()&&e),e}),i.J,i.d)),e.pb(59,49152,null,0,o.j,[e.h,e.k,e.x],{color:[0,"color"],disabled:[1,"disabled"],expand:[2,"expand"],type:[3,"type"]},null),e.pb(60,8536064,null,0,s.f,[s.m,e.k,e.h],{translate:[0,"translate"]},null),(n()(),e.qb(61,0,null,0,12,"ion-item",[["class","ion-margin-top"]],null,null,null,i.U,i.o)),e.pb(62,49152,null,0,o.G,[e.h,e.k,e.x],null,null),(n()(),e.qb(63,0,null,0,10,"ion-row",[],null,null,null,i.Z,i.t)),e.pb(64,49152,null,0,o.fb,[e.h,e.k,e.x],null,null),(n()(),e.qb(65,0,null,0,8,"ion-col",[["size","12"]],null,null,null,i.N,i.h)),e.pb(66,49152,null,0,o.s,[e.h,e.k,e.x],{size:[0,"size"]},null),(n()(),e.qb(67,0,null,0,2,"ion-label",[["translate","Username"]],null,null,null,i.V,i.p)),e.pb(68,49152,null,0,o.M,[e.h,e.k,e.x],null,null),e.pb(69,8536064,null,0,s.f,[s.m,e.k,e.h],{translate:[0,"translate"]},null),(n()(),e.qb(70,0,null,0,3,"ion-input",[["autocomplete","on"],["autofocus","true"],["type","text"]],null,[[null,"change"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,t){var u=!0,r=n.component;return"ionBlur"===l&&(u=!1!==e.Bb(n,73)._handleBlurEvent(t.target)&&u),"ionChange"===l&&(u=!1!==e.Bb(n,73)._handleInputEvent(t.target)&&u),"change"===l&&(u=!1!==(r.username=t.target.value)&&u),u}),i.T,i.n)),e.Eb(5120,null,a.c,(function(n){return[n]}),[o.Jb]),e.pb(72,49152,null,0,o.F,[e.h,e.k,e.x],{autocomplete:[0,"autocomplete"],autofocus:[1,"autofocus"],type:[2,"type"],value:[3,"value"]},null),e.pb(73,16384,null,0,o.Jb,[e.k],null,null),(n()(),e.qb(74,0,null,0,12,"ion-item",[["class","ion-margin-top"]],null,null,null,i.U,i.o)),e.pb(75,49152,null,0,o.G,[e.h,e.k,e.x],null,null),(n()(),e.qb(76,0,null,0,10,"ion-row",[],null,null,null,i.Z,i.t)),e.pb(77,49152,null,0,o.fb,[e.h,e.k,e.x],null,null),(n()(),e.qb(78,0,null,0,8,"ion-col",[["size","12"]],null,null,null,i.N,i.h)),e.pb(79,49152,null,0,o.s,[e.h,e.k,e.x],{size:[0,"size"]},null),(n()(),e.qb(80,0,null,0,2,"ion-label",[["translate","Password"]],null,null,null,i.V,i.p)),e.pb(81,49152,null,0,o.M,[e.h,e.k,e.x],null,null),e.pb(82,8536064,null,0,s.f,[s.m,e.k,e.h],{translate:[0,"translate"]},null),(n()(),e.qb(83,0,null,0,3,"ion-input",[["required",""],["type","password"]],null,[[null,"change"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,t){var u=!0,r=n.component;return"ionBlur"===l&&(u=!1!==e.Bb(n,86)._handleBlurEvent(t.target)&&u),"ionChange"===l&&(u=!1!==e.Bb(n,86)._handleInputEvent(t.target)&&u),"change"===l&&(u=!1!==(r.password=t.target.value)&&u),u}),i.T,i.n)),e.Eb(5120,null,a.c,(function(n){return[n]}),[o.Jb]),e.pb(85,49152,null,0,o.F,[e.h,e.k,e.x],{required:[0,"required"],type:[1,"type"],value:[2,"value"]},null),e.pb(86,16384,null,0,o.Jb,[e.k],null,null),(n()(),e.qb(87,0,null,0,12,"ion-item",[["class","ion-margin-top"]],null,null,null,i.U,i.o)),e.pb(88,49152,null,0,o.G,[e.h,e.k,e.x],null,null),(n()(),e.qb(89,0,null,0,10,"ion-row",[],null,null,null,i.Z,i.t)),e.pb(90,49152,null,0,o.fb,[e.h,e.k,e.x],null,null),(n()(),e.qb(91,0,null,0,8,"ion-col",[["size","12"]],null,null,null,i.N,i.h)),e.pb(92,49152,null,0,o.s,[e.h,e.k,e.x],{size:[0,"size"]},null),(n()(),e.qb(93,0,null,0,2,"ion-label",[["translate","Password Confirmation"]],null,null,null,i.V,i.p)),e.pb(94,49152,null,0,o.M,[e.h,e.k,e.x],null,null),e.pb(95,8536064,null,0,s.f,[s.m,e.k,e.h],{translate:[0,"translate"]},null),(n()(),e.qb(96,0,null,0,3,"ion-input",[["required",""],["type","password"]],null,[[null,"change"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,t){var u=!0,r=n.component;return"ionBlur"===l&&(u=!1!==e.Bb(n,99)._handleBlurEvent(t.target)&&u),"ionChange"===l&&(u=!1!==e.Bb(n,99)._handleInputEvent(t.target)&&u),"change"===l&&(u=!1!==(r.passwordConfirmation=t.target.value)&&u),u}),i.T,i.n)),e.Eb(5120,null,a.c,(function(n){return[n]}),[o.Jb]),e.pb(98,49152,null,0,o.F,[e.h,e.k,e.x],{required:[0,"required"],type:[1,"type"],value:[2,"value"]},null),e.pb(99,16384,null,0,o.Jb,[e.k],null,null),(n()(),e.qb(100,0,null,0,4,"ion-item",[["class","ion-margin-top"],["lines","none"]],null,null,null,i.U,i.o)),e.pb(101,49152,null,0,o.G,[e.h,e.k,e.x],{lines:[0,"lines"]},null),(n()(),e.qb(102,0,null,0,2,"ion-button",[["expand","block"],["size","medium"],["slot","end"],["translate","Sign Up"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.handleSignUp()&&e),e}),i.J,i.d)),e.pb(103,49152,null,0,o.j,[e.h,e.k,e.x],{disabled:[0,"disabled"],expand:[1,"expand"],size:[2,"size"]},null),e.pb(104,8536064,null,0,s.f,[s.m,e.k,e.h],{translate:[0,"translate"]},null)],(function(n,l){var t=l.component;n(l,11,0,"Sign Up"),n(l,25,0,"full"),n(l,33,0,"12"),n(l,36,0,"Phone Number"),n(l,39,0,"off","","text",t.phone),n(l,48,0,"6"),n(l,51,0,"Verification Code"),n(l,54,0,"off","","text",t.verificationCode),n(l,57,0,"6"),n(l,59,0,"tertiary",t.phone&&t.phone.length>7&&t.phone.length<15,"block","button"),n(l,60,0,"Send Verification Code"),n(l,66,0,"12"),n(l,69,0,"Username"),n(l,72,0,"on","true","text",t.username),n(l,79,0,"12"),n(l,82,0,"Password"),n(l,85,0,"","password",t.password),n(l,92,0,"12"),n(l,95,0,"Password Confirmation"),n(l,98,0,"","password",t.passwordConfirmation),n(l,101,0,"none"),n(l,103,0,!t.isInputValid(),"block","medium"),n(l,104,0,"Sign Up")}),(function(n,l){n(l,19,0,e.Bb(l,23).ngClassUntouched,e.Bb(l,23).ngClassTouched,e.Bb(l,23).ngClassPristine,e.Bb(l,23).ngClassDirty,e.Bb(l,23).ngClassValid,e.Bb(l,23).ngClassInvalid,e.Bb(l,23).ngClassPending)}))}function m(n){return e.Jb(0,[(n()(),e.qb(0,0,null,null,1,"app-register",[],null,null,null,g,f)),e.pb(1,114688,null,0,b,[h.i,s.m,c.a,o.a,p.a,d.m,d.a],null,null)],(function(n,l){n(l,1,0)}),null)}var y=e.mb("app-register",b,m,{},{},[]),k=t("SVse");class v{}t.d(l,"RegisterPageModuleNgFactory",(function(){return x}));var x=e.nb(u,[],(function(n){return e.yb([e.zb(512,e.j,e.Y,[[8,[r.a,y]],[3,e.j],e.v]),e.zb(4608,k.k,k.j,[e.s,[2,k.q]]),e.zb(4608,a.g,a.g,[]),e.zb(4608,o.b,o.b,[e.x,e.g]),e.zb(4608,o.Db,o.Db,[o.b,e.j,e.p]),e.zb(4608,o.Gb,o.Gb,[o.b,e.j,e.p]),e.zb(1073742336,k.b,k.b,[]),e.zb(1073742336,a.f,a.f,[]),e.zb(1073742336,a.b,a.b,[]),e.zb(1073742336,o.Ab,o.Ab,[]),e.zb(1073742336,d.q,d.q,[[2,d.v],[2,d.m]]),e.zb(1073742336,v,v,[]),e.zb(1073742336,s.j,s.j,[]),e.zb(1073742336,u,u,[]),e.zb(1024,d.k,(function(){return[[{path:"",component:b}]]}),[])])}))},UU5k:function(n,l,t){"use strict";t.d(l,"a",(function(){return c}));var e=t("mrSG"),u=t("IheW"),r=t("cr+I"),i=t("K2ro"),o=t("25C3"),s=t("8Y7J");const a=o.e;let c=(()=>{class n{constructor(n,l){this.http=n,this.auth=l}v1(){return new p(a.API_URL,this.http,this.auth)}v2(){return new p(a.API_V2_URL,this.http,this.auth)}}return n.ngInjectableDef=s.Nb({factory:function(){return new n(s.Ob(u.c),s.Ob(i.a))},token:n,providedIn:"root"}),n})();class p{constructor(n,l,t){this.apiHost=n,this.http=l,this.auth=t}buildUrl(n,l=null){return n=this.apiHost+(n.startsWith("/")?n:`/${n}`),l?"string"==typeof l?n+l:"object"==typeof l?`${n}?${r.stringify(l)}`:n:n}buildAuthHeader(){return e.a(this,void 0,void 0,(function*(){const n=yield this.auth.getToken();return n?{headers:(new u.g).set("Authorization",`Bearer ${n}`)}:{}}))}get(n,l=null,t=!0,u=!0){return e.a(this,void 0,void 0,(function*(){if(u&&(n=this.buildUrl(n,l)),t){const l=yield this.buildAuthHeader();return this.http.get(n,l)}return this.http.get(n)}))}post(n,l=null,t=!0,u=!0){return e.a(this,void 0,void 0,(function*(){if(u&&(n=this.buildUrl(n)),t){const t=yield this.buildAuthHeader();return this.http.post(n,l,t)}return this.http.post(n,l)}))}put(n,l=null,t=!0,u=!0){return e.a(this,void 0,void 0,(function*(){if(u&&(n=this.buildUrl(n)),t){const t=yield this.buildAuthHeader();return this.http.put(n,l,t)}return this.http.put(n,l)}))}delete(n,l=null,t=!0,u=!0){return e.a(this,void 0,void 0,(function*(){if(u&&(n=this.buildUrl(n,l)),t){const l=yield this.buildAuthHeader();return this.http.delete(n,l)}return this.http.delete(n)}))}}},ZFOp:function(n,l,t){"use strict";n.exports=n=>encodeURIComponent(n).replace(/[!'()*]/g,n=>`%${n.charCodeAt(0).toString(16).toUpperCase()}`)},"cr+I":function(n,l,t){"use strict";const e=t("ZFOp"),u=t("8jRI"),r=t("8yz6");function i(n){if("string"!=typeof n||1!==n.length)throw new TypeError("arrayFormatSeparator must be single character string")}function o(n,l){return l.encode?l.strict?e(n):encodeURIComponent(n):n}function s(n,l){return l.decode?u(n):n}function a(n){const l=n.indexOf("#");return-1!==l&&(n=n.slice(0,l)),n}function c(n){const l=(n=a(n)).indexOf("?");return-1===l?"":n.slice(l+1)}function p(n,l){return l.parseNumbers&&!Number.isNaN(Number(n))&&"string"==typeof n&&""!==n.trim()?n=Number(n):!l.parseBooleans||null===n||"true"!==n.toLowerCase()&&"false"!==n.toLowerCase()||(n="true"===n.toLowerCase()),n}function b(n,l){i((l=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},l)).arrayFormatSeparator);const t=function(n){let l;switch(n.arrayFormat){case"index":return(n,t,e)=>{l=/\[(\d*)\]$/.exec(n),n=n.replace(/\[\d*\]$/,""),l?(void 0===e[n]&&(e[n]={}),e[n][l[1]]=t):e[n]=t};case"bracket":return(n,t,e)=>{l=/(\[\])$/.exec(n),e[n=n.replace(/\[\]$/,"")]=l?void 0!==e[n]?[].concat(e[n],t):[t]:t};case"comma":case"separator":return(l,t,e)=>{const u="string"==typeof t&&t.split("").indexOf(n.arrayFormatSeparator)>-1?t.split(n.arrayFormatSeparator).map(l=>s(l,n)):null===t?t:s(t,n);e[l]=u};default:return(n,l,t)=>{t[n]=void 0!==t[n]?[].concat(t[n],l):l}}}(l),e=Object.create(null);if("string"!=typeof n)return e;if(!(n=n.trim().replace(/^[?#&]/,"")))return e;for(const u of n.split("&")){let[n,i]=r(l.decode?u.replace(/\+/g," "):u,"=");i=void 0===i?null:["comma","separator"].includes(l.arrayFormat)?i:s(i,l),t(s(n,l),i,e)}for(const u of Object.keys(e)){const n=e[u];if("object"==typeof n&&null!==n)for(const t of Object.keys(n))n[t]=p(n[t],l);else e[u]=p(n,l)}return!1===l.sort?e:(!0===l.sort?Object.keys(e).sort():Object.keys(e).sort(l.sort)).reduce((n,l)=>{const t=e[l];return n[l]=Boolean(t)&&"object"==typeof t&&!Array.isArray(t)?function n(l){return Array.isArray(l)?l.sort():"object"==typeof l?n(Object.keys(l)).sort((n,l)=>Number(n)-Number(l)).map(n=>l[n]):l}(t):t,n},Object.create(null))}l.extract=c,l.parse=b,l.stringify=(n,l)=>{if(!n)return"";i((l=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},l)).arrayFormatSeparator);const t=t=>l.skipNull&&null==n[t]||l.skipEmptyString&&""===n[t],e=function(n){switch(n.arrayFormat){case"index":return l=>(t,e)=>{const u=t.length;return void 0===e||n.skipNull&&null===e||n.skipEmptyString&&""===e?t:null===e?[...t,[o(l,n),"[",u,"]"].join("")]:[...t,[o(l,n),"[",o(u,n),"]=",o(e,n)].join("")]};case"bracket":return l=>(t,e)=>void 0===e||n.skipNull&&null===e||n.skipEmptyString&&""===e?t:null===e?[...t,[o(l,n),"[]"].join("")]:[...t,[o(l,n),"[]=",o(e,n)].join("")];case"comma":case"separator":return l=>(t,e)=>null==e||0===e.length?t:0===t.length?[[o(l,n),"=",o(e,n)].join("")]:[[t,o(e,n)].join(n.arrayFormatSeparator)];default:return l=>(t,e)=>void 0===e||n.skipNull&&null===e||n.skipEmptyString&&""===e?t:null===e?[...t,o(l,n)]:[...t,[o(l,n),"=",o(e,n)].join("")]}}(l),u={};for(const i of Object.keys(n))t(i)||(u[i]=n[i]);const r=Object.keys(u);return!1!==l.sort&&r.sort(l.sort),r.map(t=>{const u=n[t];return void 0===u?"":null===u?o(t,l):Array.isArray(u)?u.reduce(e(t),[]).join("&"):o(t,l)+"="+o(u,l)}).filter(n=>n.length>0).join("&")},l.parseUrl=(n,l)=>({url:a(n).split("?")[0]||"",query:b(c(n),l)}),l.stringifyUrl=(n,t)=>{const e=a(n.url).split("?")[0]||"",u=l.extract(n.url),r=l.parse(u),i=function(n){let l="";const t=n.indexOf("#");return-1!==t&&(l=n.slice(t)),l}(n.url),o=Object.assign(r,n.query);let s=l.stringify(o,t);return s&&(s=`?${s}`),`${e}${s}${i}`}}}]);