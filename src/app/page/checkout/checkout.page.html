<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title class="ion-text-center" translate="Checkout"></ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-row class="ion-padding">
    <ion-label>
      <h3 translate="Address"></h3>
    </ion-label>
  </ion-row>
  <ion-row class="ion-padding">
    <ion-col>
      <agm-map *ngIf="!loading" [latitude]="mapLat" [longitude]="mapLng" (mapClick)="handleMapClick($event)">
        <agm-marker [latitude]="location.lat" [longitude]="location.lng"></agm-marker>
      </agm-map>
    </ion-col>
  </ion-row>
  <ion-list>
    <ion-item *ngFor="let item of cart.items; index as itemIdx" class="ion-margin-top ion-margin-bottom">
      <ion-thumbnail slot="start">
        <app-ion-image
        [src]="(item.product.pictures && item.product.pictures.length) ? item.product.pictures[0].url : ''"
        [alt]="item.product.name"
        [routerLink]="['/tabs/browse/product', item.product._id]" routerLinkActive="router-link-active"
        style="height:100%; object-fit:cover;"
      ></app-ion-image>
      </ion-thumbnail>
      <ion-label>
        <h3 localValue [data]="item.product" [key]="'name'"></h3>
        <p localValue [data]="item" [key]="'combinationDescription'"></p>
        <p>{{item|price}} &times; {{item.quantity}}</p>
      </ion-label>
      <ion-label slot="end" class="ion-text-right">
        {{cartItemSubtotal(item)|price}}
      </ion-label>
    </ion-item>
  </ion-list>
  <ion-row class="ion-padding">
    <ion-col size="8" class="ion-text-right" translate="Subtotal"></ion-col>
    <ion-col size="4" class="ion-text-right">{{cartSubtotal()|price}}</ion-col>
  </ion-row>
</ion-content>
